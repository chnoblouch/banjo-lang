use std.convert.to_repr;

func assert_eq[T](ref a: T, ref b: T) {
    assert_eq_msg(a, b, "assertion failed");
}

func assert_eq_msg[T](ref a: T, ref b: T, message: String) {
    if a != b {
        print(message);
        print(": ");
        print(to_repr(a));
        print(" != ");
        println(to_repr(b));
        exit(1);
    }
}

func assert_ne[T](ref a: T, ref b: T) {
    assert_ne_msg(a, b, "assertion failed");
}

func assert_ne_msg[T](ref a: T, ref b: T, message: String) {
    if a == b {
        print(message);
        print(": ");
        print(to_repr(a));
        print(" == ");
        println(to_repr(b));
        exit(1);
    }
}

func fail() {
    print("test failed");
}
